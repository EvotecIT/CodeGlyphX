{
  "$schema": "https://raw.githubusercontent.com/EvotecIT/PSPublishModule/main/schemas/powerforge.web.pipelinespec.schema.json",
  "cache": true,
  "cachePath": "./_temp/pipeline-cache.json",
  "profile": true,
  "profilePath": "./_temp/pipeline-profile.json",
  "steps": [
    {
      "task": "build",
      "id": "build-site",
      "config": "./site.json",
      "out": "./_site",
      "clean": true
    },
    {
      "task": "verify",
      "id": "verify-site",
      "dependsOn": "build-site",
      "skipModes": ["ci"],
      "config": "./site.json"
    },
    {
      "task": "verify",
      "id": "verify-ci",
      "dependsOn": "build-site",
      "modes": ["ci"],
      "config": "./site.json",
      "baseline": "./.powerforge/verify-baseline.json",
      "failOnNewWarnings": true,
      "failOnNavLint": true,
      "failOnThemeContract": true,
      "warningPreviewCount": 10,
      "errorPreviewCount": 10
    },
    {
      "task": "dotnet-build",
      "id": "build-library",
      "dependsOn": "verify-site",
      "project": "../CodeGlyphX/CodeGlyphX.csproj",
      "configuration": "Release"
    },
    {
      "task": "dotnet-publish",
      "id": "publish-playground",
      "dependsOn": "build-library",
      "project": "../CodeGlyphX.Website/CodeGlyphX.Website.csproj",
      "out": "./_temp/playground",
      "clean": true,
      "configuration": "Release",
      "framework": "net10.0",
      "baseHref": "/playground/",
      "defineConstants": "TRACE;PLAYGROUND_BUILD"
    },
    {
      "task": "overlay",
      "id": "overlay-playground",
      "dependsOn": "publish-playground",
      "source": "./_temp/playground/wwwroot",
      "destination": "./_site/playground",
      "clean": true,
      "include": "**/*, *"
    },
    {
      "task": "overlay",
      "id": "overlay-playground-api",
      "dependsOn": "overlay-playground",
      "source": "./static/api",
      "destination": "./_site/playground/api",
      "clean": true,
      "include": "**/*, *"
    },
    {
      "task": "apidocs",
      "id": "build-apidocs",
      "dependsOn": "build-library",
      "config": "./site.json",
      "xml": "../CodeGlyphX/bin/Release/net10.0/CodeGlyphX.xml",
      "assembly": "../CodeGlyphX/bin/Release/net10.0/CodeGlyphX.dll",
      "out": "./_site/api",
      "title": "CodeGlyphX API Reference",
      "baseUrl": "/api",
      "format": "both",
      "css": "/css/api.css",
      "template": "docs",
      "injectCriticalCss": true,
      "nav": "./site.json",
      "navContextPath": "/",
      "sourceRoot": "..",
      "sourceUrl": "https://github.com/EvotecIT/CodeGlyphX/blob/master/{path}#L{line}",
      "includeNamespace": "CodeGlyphX",
      "excludeType": "CodeGlyphX.Rendering.Gif.BarcodeGifRenderer,CodeGlyphX.Rendering.Gif.GifAnimationFrame,CodeGlyphX.Rendering.Gif.GifAnimationOptions,CodeGlyphX.Rendering.Gif.GifDisposal,CodeGlyphX.Rendering.Gif.GifWriter,CodeGlyphX.Rendering.Gif.MatrixGifRenderer,CodeGlyphX.Rendering.Gif.QrGifRenderer,CodeGlyphX.Rendering.Pdf.PdfReader,CodeGlyphX.Rendering.Psd.PsdReader,CodeGlyphX.Rendering.Tiff.BarcodeTiffRenderer,CodeGlyphX.Rendering.Tiff.MatrixTiffRenderer,CodeGlyphX.Rendering.Tiff.QrTiffRenderer,CodeGlyphX.Rendering.Tiff.TiffCompression,CodeGlyphX.Rendering.Tiff.TiffRgba32Page,CodeGlyphX.Rendering.Tiff.TiffWriter,CodeGlyphX.Rendering.Jpeg.JpegEncodeOptions,CodeGlyphX.Rendering.Jpeg.JpegMetadata,CodeGlyphX.Rendering.Jpeg.JpegSubsampling",
      "coverageReport": "./_reports/apidocs-coverage.json",
      "minTypeSourceUrlPercent": 95,
      "minMemberSourceUrlPercent": 70,
      "maxTypeSourceInvalidUrlCount": 0,
      "maxMemberSourceInvalidUrlCount": 0,
      "maxTypeSourceUnresolvedTemplateCount": 0,
      "maxMemberSourceUnresolvedTemplateCount": 0,
      "maxTypeSourceRepoMismatchHints": 0,
      "maxMemberSourceRepoMismatchHints": 0,
      "failOnCoverage": true,
      "coveragePreviewCount": 10
    },
    {
      "task": "llms",
      "id": "build-llms",
      "dependsOn": "build-apidocs",
      "siteRoot": "./_site",
      "apiIndex": "./_site/api/index.json",
      "apiBase": "/api",
      "name": "CodeGlyphX",
      "package": "CodeGlyphX",
      "license": "Apache-2.0",
      "targets": ".NET 8+, .NET 10+, .NET Standard 2.0"
    },
    {
      "task": "sitemap",
      "id": "build-sitemap",
      "dependsOn": "build-llms",
      "siteRoot": "./_site",
      "baseUrl": "https://codeglyphx.com",
      "apiSitemap": "./_site/api/sitemap.xml",
      "html": true,
      "htmlTitle": "CodeGlyphX Sitemap",
      "entries": [
        { "path": "/", "priority": "1.0", "changefreq": "weekly" },
        { "path": "/playground/", "priority": "0.9", "changefreq": "weekly" },
        { "path": "/docs/", "priority": "0.9", "changefreq": "weekly" },
        { "path": "/benchmarks/", "priority": "0.8", "changefreq": "monthly" },
        { "path": "/faq/", "priority": "0.8", "changefreq": "monthly" },
        { "path": "/showcase/", "priority": "0.7", "changefreq": "monthly" },
        { "path": "/pricing/", "priority": "0.7", "changefreq": "monthly" },
        { "path": "/api/", "priority": "0.8", "changefreq": "weekly" },
        { "path": "/llms.txt", "priority": "0.3", "changefreq": "monthly" },
        { "path": "/llms.json", "priority": "0.3", "changefreq": "monthly" },
        { "path": "/llms-full.txt", "priority": "0.4", "changefreq": "monthly" }
      ]
    },
    {
      "task": "optimize",
      "id": "optimize-site",
      "dependsOn": "build-sitemap",
      "skipModes": ["dev"],
      "siteRoot": "./_site",
      "criticalCss": "./themes/codeglyphx/critical.css",
      "minifyHtml": true,
      "minifyCss": true,
      "minifyJs": true,
      "optimizeImages": true,
      "imageExtensions": [".png", ".jpg", ".jpeg", ".webp"],
      "imageQuality": 82,
      "imageStripMetadata": true,
      "imageGenerateWebp": true,
      "imagePreferNextGen": true,
      "imageWidths": [480, 960, 1440],
      "imageEnhanceTags": true,
      "imageMaxTotalBytes": 70000000,
      "reportPath": "./_reports/optimize-report.json"
    },
    {
      "task": "doctor",
      "id": "doctor-site",
      "dependsOn": "optimize-site",
      "skipModes": ["dev"],
      "config": "./site.json",
      "siteRoot": "./_site",
      "noBuild": true,
      "noVerify": true,
      "baseline": "./.powerforge/audit-baseline.json",
      "failOnNewIssues": true,
      "maxTotalFiles": 2200,
      "exclude": "**/*.scripts.html,**/*.head.html,**/api-fragments/**,api-fragments/**",
      "ignoreNav": "sitemap/**,playground/index.html,playground/404.html",
      "noDefaultIgnoreNav": true,
      "navSelector": "header nav.nav",
      "navCanonicalPath": "index.html",
      "navCanonicalSelector": "header nav.nav",
      "navCanonicalRequired": true,
      "navRequiredLinks": "/,/docs/",
      "minNavCoveragePercent": 95,
      "requiredRoutes": "/,/docs/,/404.html,/api/",
      "failOnCategories": "budget,nav,link,asset,rendered-console-error,rendered-request-failure",
      "rendered": true,
      "renderedEnsureInstalled": false,
      "renderedMaxPages": 10,
      "renderedInclude": "index.html,docs/**,benchmarks/**,faq/**,pricing/**,showcase/**,playground/**",
      "renderedExclude": "api/**,docs/api/**,api-docs/**",
      "summary": true,
      "summaryPath": "./_reports/doctor-summary.json",
      "summaryMaxIssues": 50,
      "checkUtf8": true,
      "checkMetaCharset": true,
      "checkUnicodeReplacementChars": true
    }
  ]
}

