@using CodeGlyphX
@using CodeGlyphX.Payloads
@using CodeGlyphX.DataMatrix
@using CodeGlyphX.Pdf417
@using CodeGlyphX.Aztec
@using CodeGlyphX.Rendering
@using CodeGlyphX.Rendering.Png
@using Microsoft.AspNetCore.Components.Forms

@if (Host is null)
{
    <div class="card">
        <h2>Configuration</h2>
        <p>Loading...</p>
    </div>
}
else
{
    <div class="card">
        <h2>Configuration</h2>

        <div class="form-group">
            <label>Mode</label>
            <select @bind="Host.SelectedMode" @bind:after="Host.OnModeChanged">
                <option value="Generate">Generate</option>
                <option value="Decode">Decode</option>
            </select>
        </div>

        @if (Host.SelectedMode == "Decode")
        {
            <div class="form-group">
                <label>Image File</label>
                <div class="dropzone @(Host.IsDropActive ? "active" : string.Empty)"
                     @ondragenter="@(() => Host.IsDropActive = true)"
                     @ondragleave="@(() => Host.IsDropActive = false)"
                     @ondrop="@(() => Host.IsDropActive = false)"
                     @ondragover:preventDefault="true"
                     @ondrop:preventDefault="true">
                    <InputFile class="drop-input" OnChange="Host.OnDecodeFileChanged" accept="image/*" />
                    <div class="dropzone-inner">
                        <strong>Drop an image here</strong>
                        <span>or click to select</span>
                    </div>
                </div>
                <small class="form-hint">Supports PNG, JPEG, GIF, BMP, TIFF, PPM/PBM/PGM/PAM, XBM/XPM, TGA, ICO.</small>
            </div>

            <div class="form-group">
                <label>Decode Options</label>
                <div class="form-row">
                    <label><input type="checkbox" @bind="Host.DecodeDownscale" /> Downscale large images</label>
                    <label><input type="checkbox" @bind="Host.DecodeStopAfterFirst" /> Stop after first match</label>
                </div>
            </div>

            <div class="form-group">
                <label>Max dimension (px): @Host.DecodeMaxDimension</label>
                <input type="range" min="512" max="2048" step="128" @bind="Host.DecodeMaxDimension" />
            </div>

            <div class="form-group">
                <label>Max time (ms): @Host.DecodeMaxMilliseconds</label>
                <input type="range" min="200" max="2000" step="50" @bind="Host.DecodeMaxMilliseconds" />
            </div>

            <div class="form-group">
                <label>Try Decode</label>
                <div class="form-row">
                    <label><input type="checkbox" @bind="Host.DecodeQr" /> QR</label>
                    <label><input type="checkbox" @bind="Host.DecodeBarcode" /> 1D Barcodes</label>
                    <label><input type="checkbox" @bind="Host.DecodeMatrix" /> 2D Matrix</label>
                </div>
                @if (Host.IsDecoding)
                {
                    <div class="form-row" style="margin-top:8px;">
                        <small>@Host.DecodeStatus</small>
                        <button type="button" class="preset-btn" @onclick="Host.CancelDecode">Cancel</button>
                    </div>
                }
            </div>
        }
        else
        {
            <div class="form-group">
                <label>Presets</label>
                <div class="preset-grid">
                    <button type="button" class="preset-btn" @onclick="@(() => Host.ApplyPreset("QrUrl"))">QR URL</button>
                    <button type="button" class="preset-btn" @onclick="@(() => Host.ApplyPreset("QrWifi"))">WiFi</button>
                    <button type="button" class="preset-btn" @onclick="@(() => Host.ApplyPreset("QrOtp"))">OTP</button>
                    <button type="button" class="preset-btn" @onclick="@(() => Host.ApplyPreset("BarcodeEan"))">EAN-13</button>
                    <button type="button" class="preset-btn" @onclick="@(() => Host.ApplyPreset("BarcodeCode128"))">Code 128</button>
                    <button type="button" class="preset-btn" @onclick="@(() => Host.ApplyPreset("MatrixPdf417"))">PDF417</button>
                    <button type="button" class="preset-btn" @onclick="@(() => Host.ApplyPreset("MatrixDataMatrix"))">Data Matrix</button>
                    <button type="button" class="preset-btn" @onclick="@(() => Host.ApplyPreset("MatrixAztec"))">Aztec</button>
                </div>
            </div>

            <div class="form-group">
                <label>Code Type</label>
                <select @bind="Host.SelectedCategory" @bind:after="Host.OnCategoryChanged">
                    <option value="QR">QR Code</option>
                    <option value="SpecialQR">Special QR Codes</option>
                    <option value="Barcode">1D Barcodes</option>
                    <option value="Matrix">2D Matrix Codes</option>
                </select>
            </div>

            @if (Host.SelectedCategory == "QR")
            {
                <div class="form-group">
                    <label>Content</label>
                    <textarea rows="3" @bind="Host.Content" @bind:after="Host.GenerateCode" placeholder="Enter text, URL, or data..."></textarea>
                </div>

                <div class="form-group">
                    <label>Error Correction Level</label>
                    <select @bind="Host.ErrorCorrection" @bind:after="Host.GenerateCode">
                        <option value="L">L - Low (7% recovery)</option>
                        <option value="M">M - Medium (15% recovery)</option>
                        <option value="Q">Q - Quartile (25% recovery)</option>
                        <option value="H">H - High (30% recovery)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Module Shape</label>
                    <select @bind="Host.ModuleShape" @bind:after="Host.GenerateCode">
                        <option value="Square">Square</option>
                        <option value="Circle">Circle</option>
                        <option value="Rounded">Rounded</option>
                        <option value="Dot">Dot</option>
                        <option value="DotGrid">Dot Grid</option>
                        <option value="Diamond">Diamond</option>
                        <option value="SoftDiamond">Soft Diamond</option>
                        <option value="Squircle">Squircle</option>
                        <option value="Leaf">Leaf</option>
                        <option value="Wave">Wave</option>
                        <option value="Blob">Blob</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Output Size</label>
                    <select @bind="Host.OutputSizePreset" @bind:after="Host.OnOutputSizePresetChanged">
                        <option value="Auto">Auto</option>
                        <option value="1200">1200 px</option>
                        <option value="2400">2400 px</option>
                        <option value="4000">4000 px</option>
                        <option value="8000">8000 px</option>
                        <option value="Custom">Custom</option>
                    </select>
                    @if (Host.OutputSizePreset == "Custom")
                    {
                        <div class="form-row" style="margin-top:8px;">
                            <label>Target px</label>
                            <input type="number" min="200" max="12000" step="50" @bind="Host.TargetSizePx" @bind:after="Host.GenerateCode" />
                        </div>
                    }
                    <div class="form-row" style="margin-top:8px;">
                        <label><input type="checkbox" @bind="Host.TargetSizeIncludesQuietZone" @bind:after="Host.GenerateCode" /> Include quiet zone</label>
                    </div>
                </div>

                <div class="form-group">
                    <label>Module Scale: @Host.ModuleScale.ToString("0.00")</label>
                    <input type="range" min="0.6" max="1.0" step="0.01" @bind="Host.ModuleScale" @bind:after="Host.GenerateCode" />
                </div>

                @if (Host.ModuleShape == "Rounded")
                {
                    <div class="form-group">
                        <label>Corner Radius: @Host.CornerRadius</label>
                        <input type="range" min="0" max="8" step="1" @bind="Host.CornerRadius" @bind:after="Host.GenerateCode" />
                    </div>
                }

                <div class="form-group">
                    <label>Colors</label>
                    <div class="form-row">
                        <input type="color" @bind="Host.ForegroundColor" @bind:after="Host.GenerateCode" />
                        <input type="color" @bind="Host.BackgroundColor" @bind:after="Host.GenerateCode" />
                    </div>
                </div>

                <div class="form-group">
                    <label>Background quality: @Host.BackgroundSupersample x</label>
                    <input type="range" min="1" max="4" step="1" @bind="Host.BackgroundSupersample" @bind:after="Host.GenerateCode" />
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" @bind="Host.EnableQrBackgroundPattern" @bind:after="Host.GenerateCode" />
                        QR background pattern
                    </label>
                    @if (Host.EnableQrBackgroundPattern)
                    {
                        <div class="form-row" style="margin-top:8px;">
                            <select @bind="Host.QrBackgroundPatternType" @bind:after="Host.GenerateCode">
                                <option value="Dots">Dots</option>
                                <option value="Grid">Grid</option>
                                <option value="Checker">Checker</option>
                            </select>
                            <input type="color" @bind="Host.QrBackgroundPatternColor" @bind:after="Host.GenerateCode" />
                        </div>
                        <div class="form-row" style="margin-top:8px;">
                            <label>Alpha: @Host.QrBackgroundPatternAlpha</label>
                            <input type="range" min="0" max="200" step="5" @bind="Host.QrBackgroundPatternAlpha" @bind:after="Host.GenerateCode" />
                            <label>Size: @Host.QrBackgroundPatternSizePx</label>
                            <input type="range" min="4" max="20" step="1" @bind="Host.QrBackgroundPatternSizePx" @bind:after="Host.GenerateCode" disabled="@Host.QrBackgroundPatternSnapToModules" />
                            <label>Thickness: @Host.QrBackgroundPatternThicknessPx</label>
                            <input type="range" min="1" max="6" step="1" @bind="Host.QrBackgroundPatternThicknessPx" @bind:after="Host.GenerateCode" />
                        </div>
                        <div class="form-row" style="margin-top:8px;">
                            <label><input type="checkbox" @bind="Host.QrBackgroundPatternSnapToModules" @bind:after="Host.GenerateCode" /> Snap to modules</label>
                            <label>Step: @Host.QrBackgroundPatternModuleStep</label>
                            <input type="range" min="1" max="6" step="1" @bind="Host.QrBackgroundPatternModuleStep" @bind:after="Host.GenerateCode" />
                        </div>
                    }
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" @bind="Host.UseForegroundGradient" @bind:after="Host.GenerateCode" />
                        Foreground gradient
                    </label>
                    @if (Host.UseForegroundGradient)
                    {
                        <div class="form-row" style="margin-top:8px;">
                            <select @bind="Host.ForegroundGradientType" @bind:after="Host.GenerateCode">
                                <option value="Horizontal">Horizontal</option>
                                <option value="Vertical">Vertical</option>
                                <option value="DiagonalDown">Diagonal Down</option>
                                <option value="DiagonalUp">Diagonal Up</option>
                                <option value="Radial">Radial</option>
                            </select>
                            <input type="color" @bind="Host.ForegroundGradientStart" @bind:after="Host.GenerateCode" />
                            <input type="color" @bind="Host.ForegroundGradientEnd" @bind:after="Host.GenerateCode" />
                        </div>
                    }
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" @bind="Host.UseBackgroundGradient" @bind:after="Host.GenerateCode" />
                        Background gradient
                    </label>
                    @if (Host.UseBackgroundGradient)
                    {
                        <div class="form-row" style="margin-top:8px;">
                            <select @bind="Host.BackgroundGradientType" @bind:after="Host.GenerateCode">
                                <option value="Horizontal">Horizontal</option>
                                <option value="Vertical">Vertical</option>
                                <option value="DiagonalDown">Diagonal Down</option>
                                <option value="DiagonalUp">Diagonal Up</option>
                                <option value="Radial">Radial</option>
                            </select>
                            <input type="color" @bind="Host.BackgroundGradientStart" @bind:after="Host.GenerateCode" />
                            <input type="color" @bind="Host.BackgroundGradientEnd" @bind:after="Host.GenerateCode" />
                        </div>
                    }
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" @bind="Host.EnablePalette" @bind:after="Host.GenerateCode" />
                        Palette colors
                    </label>
                    @if (Host.EnablePalette)
                    {
                        <div class="form-group" style="margin-top:8px;">
                            <label>Palette Mode</label>
                            <select @bind="Host.PaletteMode" @bind:after="Host.GenerateCode">
                                <option value="Cycle">Cycle</option>
                                <option value="Checker">Checker</option>
                                <option value="Random">Random</option>
                                <option value="Rings">Rings</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <input type="color" @bind="Host.PaletteColor1" @bind:after="Host.GenerateCode" />
                            <input type="color" @bind="Host.PaletteColor2" @bind:after="Host.GenerateCode" />
                            <input type="color" @bind="Host.PaletteColor3" @bind:after="Host.GenerateCode" />
                        </div>
                        <div class="form-row" style="margin-top:8px;">
                            <label>Seed: @Host.PaletteSeed</label>
                            <input type="range" min="0" max="20000" step="1" @bind="Host.PaletteSeed" @bind:after="Host.GenerateCode" />
                            <label>Ring Size: @Host.PaletteRingSize</label>
                            <input type="range" min="1" max="6" step="1" @bind="Host.PaletteRingSize" @bind:after="Host.GenerateCode" />
                        </div>
                    }
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" @bind="Host.EnableZonePalettes" @bind:after="Host.GenerateCode" />
                        Zone palettes
                    </label>
                    @if (Host.EnableZonePalettes)
                    {
                        <div class="form-group" style="margin-top:8px;">
                            <label>Center Zone</label>
                            <div class="form-row">
                                <select @bind="Host.CenterPaletteMode" @bind:after="Host.GenerateCode">
                                    <option value="Cycle">Cycle</option>
                                    <option value="Checker">Checker</option>
                                    <option value="Random">Random</option>
                                    <option value="Rings">Rings</option>
                                </select>
                                <input type="color" @bind="Host.CenterPaletteColor1" @bind:after="Host.GenerateCode" />
                                <input type="color" @bind="Host.CenterPaletteColor2" @bind:after="Host.GenerateCode" />
                                <input type="color" @bind="Host.CenterPaletteColor3" @bind:after="Host.GenerateCode" />
                            </div>
                            <div class="form-row" style="margin-top:8px;">
                                <label>Size: @Host.CenterZoneSize</label>
                                <input type="range" min="3" max="15" step="1" @bind="Host.CenterZoneSize" @bind:after="Host.GenerateCode" />
                                <label>Seed: @Host.CenterPaletteSeed</label>
                                <input type="range" min="0" max="20000" step="1" @bind="Host.CenterPaletteSeed" @bind:after="Host.GenerateCode" />
                            </div>
                        </div>
                        <div class="form-group" style="margin-top:8px;">
                            <label>Corner Zone</label>
                            <div class="form-row">
                                <select @bind="Host.CornerPaletteMode" @bind:after="Host.GenerateCode">
                                    <option value="Cycle">Cycle</option>
                                    <option value="Checker">Checker</option>
                                    <option value="Random">Random</option>
                                    <option value="Rings">Rings</option>
                                </select>
                                <input type="color" @bind="Host.CornerPaletteColor1" @bind:after="Host.GenerateCode" />
                                <input type="color" @bind="Host.CornerPaletteColor2" @bind:after="Host.GenerateCode" />
                            </div>
                            <div class="form-row" style="margin-top:8px;">
                                <label>Size: @Host.CornerZoneSize</label>
                                <input type="range" min="3" max="10" step="1" @bind="Host.CornerZoneSize" @bind:after="Host.GenerateCode" />
                                <label>Seed: @Host.CornerPaletteSeed</label>
                                <input type="range" min="0" max="20000" step="1" @bind="Host.CornerPaletteSeed" @bind:after="Host.GenerateCode" />
                            </div>
                        </div>
                    }
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" @bind="Host.EnableScaleMap" @bind:after="Host.GenerateCode" />
                        Module scale map
                    </label>
                    @if (Host.EnableScaleMap)
                    {
                        <div class="form-group" style="margin-top:8px;">
                            <label>Mode</label>
                            <select @bind="Host.ScaleMapMode" @bind:after="Host.GenerateCode">
                                <option value="Rings">Rings</option>
                                <option value="Radial">Radial</option>
                                <option value="Random">Random</option>
                                <option value="Checker">Checker</option>
                            </select>
                        </div>
                        <div class="form-row" style="margin-top:8px;">
                            <label>Min: @Host.ScaleMapMin.ToString("0.00")</label>
                            <input type="range" min="0.5" max="1.0" step="0.01" @bind="Host.ScaleMapMin" @bind:after="Host.GenerateCode" />
                            <label>Max: @Host.ScaleMapMax.ToString("0.00")</label>
                            <input type="range" min="0.5" max="1.0" step="0.01" @bind="Host.ScaleMapMax" @bind:after="Host.GenerateCode" />
                        </div>
                        <div class="form-row" style="margin-top:8px;">
                            <label>Ring Size: @Host.ScaleMapRingSize</label>
                            <input type="range" min="1" max="6" step="1" @bind="Host.ScaleMapRingSize" @bind:after="Host.GenerateCode" />
                            <label>Seed: @Host.ScaleMapSeed</label>
                            <input type="range" min="0" max="20000" step="1" @bind="Host.ScaleMapSeed" @bind:after="Host.GenerateCode" />
                        </div>
                        <div class="form-row" style="margin-top:8px;">
                            <label><input type="checkbox" @bind="Host.ScaleMapApplyToEyes" @bind:after="Host.GenerateCode" /> Apply to eyes</label>
                        </div>
                    }
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" @bind="Host.CustomEyes" @bind:after="Host.GenerateCode" />
                        Customize eyes
                    </label>
                </div>

                @if (Host.CustomEyes)
                {
                    <div class="form-group">
                        <label>Eye Frame Style</label>
                        <select @bind="Host.EyeFrameStyle" @bind:after="Host.GenerateCode">
                            <option value="Single">Single</option>
                            <option value="DoubleRing">Double Ring</option>
                            <option value="Target">Target</option>
                            <option value="Bracket">Bracket</option>
                            <option value="Badge">Badge</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Eye Outer Shape</label>
                        <select @bind="Host.EyeOuterShape" @bind:after="Host.GenerateCode">
                            <option value="Square">Square</option>
                            <option value="Circle">Circle</option>
                            <option value="Rounded">Rounded</option>
                            <option value="Dot">Dot</option>
                            <option value="DotGrid">Dot Grid</option>
                            <option value="Diamond">Diamond</option>
                            <option value="SoftDiamond">Soft Diamond</option>
                            <option value="Squircle">Squircle</option>
                            <option value="Leaf">Leaf</option>
                            <option value="Wave">Wave</option>
                            <option value="Blob">Blob</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Eye Inner Shape</label>
                        <select @bind="Host.EyeInnerShape" @bind:after="Host.GenerateCode">
                            <option value="Square">Square</option>
                            <option value="Circle">Circle</option>
                            <option value="Rounded">Rounded</option>
                            <option value="Dot">Dot</option>
                            <option value="DotGrid">Dot Grid</option>
                            <option value="Diamond">Diamond</option>
                            <option value="SoftDiamond">Soft Diamond</option>
                            <option value="Squircle">Squircle</option>
                            <option value="Leaf">Leaf</option>
                            <option value="Wave">Wave</option>
                            <option value="Blob">Blob</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Eye Colors</label>
                        <div class="form-row">
                            <input type="color" @bind="Host.EyeOuterColor" @bind:after="Host.GenerateCode" />
                            <input type="color" @bind="Host.EyeInnerColor" @bind:after="Host.GenerateCode" />
                        </div>
                    </div>
                }

                <div class="form-group">
                    <label>
                        <input type="checkbox" @bind="Host.EnableCanvas" @bind:after="Host.GenerateCode" />
                        Canvas / Sticker
                    </label>
                    @if (Host.EnableCanvas)
                    {
                        <div class="form-row" style="margin-top:8px;">
                            <label>Padding: @Host.CanvasPaddingPx</label>
                            <input type="range" min="8" max="48" step="1" @bind="Host.CanvasPaddingPx" @bind:after="Host.GenerateCode" />
                            <label>Radius: @Host.CanvasCornerRadiusPx</label>
                            <input type="range" min="0" max="36" step="1" @bind="Host.CanvasCornerRadiusPx" @bind:after="Host.GenerateCode" />
                        </div>
                        <div class="form-group" style="margin-top:8px;">
                            <label>Canvas Background</label>
                            <div class="form-row">
                                <input type="color" @bind="Host.CanvasBackgroundColor" @bind:after="Host.GenerateCode" />
                                <label><input type="checkbox" @bind="Host.CanvasUseGradient" @bind:after="Host.GenerateCode" /> Gradient</label>
                            </div>
                            @if (Host.CanvasUseGradient)
                            {
                                <div class="form-row" style="margin-top:8px;">
                                    <select @bind="Host.CanvasGradientType" @bind:after="Host.GenerateCode">
                                        <option value="Horizontal">Horizontal</option>
                                        <option value="Vertical">Vertical</option>
                                        <option value="DiagonalDown">Diagonal Down</option>
                                        <option value="DiagonalUp">Diagonal Up</option>
                                        <option value="Radial">Radial</option>
                                    </select>
                                    <input type="color" @bind="Host.CanvasGradientStart" @bind:after="Host.GenerateCode" />
                                    <input type="color" @bind="Host.CanvasGradientEnd" @bind:after="Host.GenerateCode" />
                                </div>
                            }
                        </div>

                        <div class="form-group">
                            <label>
                                <input type="checkbox" @bind="Host.CanvasUsePattern" @bind:after="Host.GenerateCode" />
                                Pattern overlay
                            </label>
                            @if (Host.CanvasUsePattern)
                            {
                                <div class="form-row" style="margin-top:8px;">
                                    <select @bind="Host.CanvasPatternType" @bind:after="Host.GenerateCode">
                                        <option value="Dots">Dots</option>
                                        <option value="Grid">Grid</option>
                                        <option value="Checker">Checker</option>
                                    </select>
                                    <input type="color" @bind="Host.CanvasPatternColor" @bind:after="Host.GenerateCode" />
                                </div>
                                <div class="form-row" style="margin-top:8px;">
                                    <label>Alpha: @Host.CanvasPatternAlpha</label>
                                    <input type="range" min="0" max="200" step="5" @bind="Host.CanvasPatternAlpha" @bind:after="Host.GenerateCode" />
                                    <label>Size: @Host.CanvasPatternSizePx</label>
                                    <input type="range" min="4" max="20" step="1" @bind="Host.CanvasPatternSizePx" @bind:after="Host.GenerateCode" />
                                    <label>Thickness: @Host.CanvasPatternThicknessPx</label>
                                    <input type="range" min="1" max="6" step="1" @bind="Host.CanvasPatternThicknessPx" @bind:after="Host.GenerateCode" />
                                </div>
                            }
                        </div>

                        <div class="form-group">
                            <label>Border</label>
                            <div class="form-row">
                                <label>Size: @Host.CanvasBorderPx</label>
                                <input type="range" min="0" max="8" step="1" @bind="Host.CanvasBorderPx" @bind:after="Host.GenerateCode" />
                                <input type="color" @bind="Host.CanvasBorderColor" @bind:after="Host.GenerateCode" />
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Shadow</label>
                            <div class="form-row">
                                <label>X: @Host.CanvasShadowOffsetX</label>
                                <input type="range" min="-12" max="12" step="1" @bind="Host.CanvasShadowOffsetX" @bind:after="Host.GenerateCode" />
                                <label>Y: @Host.CanvasShadowOffsetY</label>
                                <input type="range" min="-12" max="12" step="1" @bind="Host.CanvasShadowOffsetY" @bind:after="Host.GenerateCode" />
                            </div>
                            <div class="form-row" style="margin-top:8px;">
                                <input type="color" @bind="Host.CanvasShadowColor" @bind:after="Host.GenerateCode" />
                                <label>Alpha: @Host.CanvasShadowAlpha</label>
                                <input type="range" min="0" max="200" step="5" @bind="Host.CanvasShadowAlpha" @bind:after="Host.GenerateCode" />
                            </div>
                        </div>
                    }
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" @bind="Host.EnableDebugOverlay" @bind:after="Host.GenerateCode" />
                        Safety overlay
                    </label>
                    @if (Host.EnableDebugOverlay)
                    {
                        <div class="form-row" style="margin-top:8px;">
                            <label><input type="checkbox" @bind="Host.DebugShowQuietZone" @bind:after="Host.GenerateCode" /> Quiet zone</label>
                            <label><input type="checkbox" @bind="Host.DebugShowQrBounds" @bind:after="Host.GenerateCode" /> QR bounds</label>
                        </div>
                        <div class="form-row" style="margin-top:8px;">
                            <label><input type="checkbox" @bind="Host.DebugShowEyeBounds" @bind:after="Host.GenerateCode" /> Eye bounds</label>
                            <label><input type="checkbox" @bind="Host.DebugShowLogoBounds" @bind:after="Host.GenerateCode" /> Logo bounds</label>
                        </div>
                        <div class="form-row" style="margin-top:8px;">
                            <label>Stroke: @Host.DebugStrokePx</label>
                            <input type="range" min="1" max="4" step="1" @bind="Host.DebugStrokePx" @bind:after="Host.GenerateCode" />
                        </div>
                    }
                </div>
            }
            else if (Host.SelectedCategory == "SpecialQR")
            {
                <div class="form-group">
                    <label>Type</label>
                    <select @bind="Host.SpecialPayloadType" @bind:after="Host.GenerateCode">
                        <option value="WiFi">WiFi</option>
                        <option value="vCard">vCard</option>
                        <option value="Email">Email</option>
                        <option value="Phone">Phone</option>
                        <option value="SMS">SMS</option>
                        <option value="URL">URL</option>
                        <option value="OTP">OTP</option>
                        <option value="Girocode">Girocode</option>
                    </select>
                </div>

                @if (Host.SpecialPayloadType == "WiFi")
                {
                    <div class="form-group">
                        <label>SSID</label>
                        <input type="text" @bind="Host.WifiSsid" @bind:after="Host.GenerateCode" />
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="text" @bind="Host.WifiPassword" @bind:after="Host.GenerateCode" />
                    </div>
                    <div class="form-group">
                        <label>Security</label>
                        <select @bind="Host.WifiSecurity" @bind:after="Host.GenerateCode">
                            <option value="WPA">WPA/WPA2</option>
                            <option value="WEP">WEP</option>
                            <option value="None">None</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label><input type="checkbox" @bind="Host.WifiHidden" @bind:after="Host.GenerateCode" /> Hidden network</label>
                    </div>
                }
                else if (Host.SpecialPayloadType == "vCard")
                {
                    <div class="form-group">
                        <label>First name</label>
                        <input type="text" @bind="Host.VCardFirstName" @bind:after="Host.GenerateCode" />
                    </div>
                    <div class="form-group">
                        <label>Last name</label>
                        <input type="text" @bind="Host.VCardLastName" @bind:after="Host.GenerateCode" />
                    </div>
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="text" @bind="Host.VCardPhone" @bind:after="Host.GenerateCode" />
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="text" @bind="Host.VCardEmail" @bind:after="Host.GenerateCode" />
                    </div>
                    <div class="form-group">
                        <label>Website</label>
                        <input type="text" @bind="Host.VCardWebsite" @bind:after="Host.GenerateCode" />
                    </div>
                    <div class="form-group">
                        <label>Organization</label>
                        <input type="text" @bind="Host.VCardOrganization" @bind:after="Host.GenerateCode" />
                    </div>
                }
                else if (Host.SpecialPayloadType == "Email")
                {
                    <div class="form-group">
                        <label>Address</label>
                        <input type="text" @bind="Host.EmailAddress" @bind:after="Host.GenerateCode" />
                    </div>
                    <div class="form-group">
                        <label>Subject</label>
                        <input type="text" @bind="Host.EmailSubject" @bind:after="Host.GenerateCode" />
                    </div>
                    <div class="form-group">
                        <label>Body</label>
                        <textarea rows="2" @bind="Host.EmailBody" @bind:after="Host.GenerateCode"></textarea>
                    </div>
                }
                else if (Host.SpecialPayloadType == "Phone")
                {
                    <div class="form-group">
                        <label>Phone number</label>
                        <input type="text" @bind="Host.PhoneNumber" @bind:after="Host.GenerateCode" />
                    </div>
                }
                else if (Host.SpecialPayloadType == "SMS")
                {
                    <div class="form-group">
                        <label>Number</label>
                        <input type="text" @bind="Host.SmsNumber" @bind:after="Host.GenerateCode" />
                    </div>
                    <div class="form-group">
                        <label>Message</label>
                        <textarea rows="2" @bind="Host.SmsMessage" @bind:after="Host.GenerateCode"></textarea>
                    </div>
                }
                else if (Host.SpecialPayloadType == "URL")
                {
                    <div class="form-group">
                        <label>URL</label>
                        <input type="text" @bind="Host.UrlContent" @bind:after="Host.GenerateCode" />
                    </div>
                }
                else if (Host.SpecialPayloadType == "OTP")
                {
                    <div class="form-group">
                        <label>Type</label>
                        <select @bind="Host.OtpType" @bind:after="Host.GenerateCode">
                            <option value="TOTP">TOTP</option>
                            <option value="HOTP">HOTP</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Secret</label>
                        <input type="text" @bind="Host.OtpSecret" @bind:after="Host.GenerateCode" />
                    </div>
                    <div class="form-group">
                        <label>Label</label>
                        <input type="text" @bind="Host.OtpLabel" @bind:after="Host.GenerateCode" />
                    </div>
                    <div class="form-group">
                        <label>Issuer</label>
                        <input type="text" @bind="Host.OtpIssuer" @bind:after="Host.GenerateCode" />
                    </div>
                }
                else if (Host.SpecialPayloadType == "Girocode")
                {
                    <div class="form-group">
                        <label>IBAN</label>
                        <input type="text" @bind="Host.GirocodeIban" @bind:after="Host.GenerateCode" />
                    </div>
                    <div class="form-group">
                        <label>BIC</label>
                        <input type="text" @bind="Host.GirocodeBic" @bind:after="Host.GenerateCode" />
                    </div>
                    <div class="form-group">
                        <label>Recipient</label>
                        <input type="text" @bind="Host.GirocodeRecipient" @bind:after="Host.GenerateCode" />
                    </div>
                    <div class="form-group">
                        <label>Amount</label>
                        <input type="number" step="0.01" @bind="Host.GirocodeAmount" @bind:after="Host.GenerateCode" />
                    </div>
                    <div class="form-group">
                        <label>Reference</label>
                        <input type="text" @bind="Host.GirocodeReference" @bind:after="Host.GenerateCode" />
                    </div>
                }
            }
            else if (Host.SelectedCategory == "Barcode")
            {
                <div class="form-group">
                    <label>Barcode Type</label>
                    <select @bind="Host.SelectedBarcodeType" @bind:after="Host.OnBarcodeTypeChanged">
                        <option value="Code128">Code 128</option>
                        <option value="GS1128">GS1-128</option>
                        <option value="Code39">Code 39</option>
                        <option value="Code93">Code 93</option>
                        <option value="Code11">Code 11</option>
                        <option value="Codabar">Codabar</option>
                        <option value="MSI">MSI</option>
                        <option value="Plessey">Plessey</option>
                        <option value="Telepen">Telepen</option>
                        <option value="EAN">EAN-13</option>
                        <option value="UPCA">UPC-A</option>
                        <option value="UPCE">UPC-E</option>
                        <option value="ITF14">ITF-14</option>
                        <option value="ITF">ITF (Interleaved 2 of 5)</option>
                        <option value="Code32">Code 32 (Italian Pharma)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>@Host.GetBarcodeContentLabel()</label>
                    <input type="text" @bind="Host.BarcodeContent" @bind:after="Host.GenerateCode" placeholder="@Host.GetBarcodeContentPlaceholder()" />
                    @if (!string.IsNullOrEmpty(Host.BarcodeHint))
                    {
                        <small class="form-hint">@Host.BarcodeHint</small>
                    }
                </div>
            }
            else if (Host.SelectedCategory == "Matrix")
            {
                <div class="form-group">
                    <label>Matrix Type</label>
                    <select @bind="Host.SelectedMatrixType" @bind:after="Host.GenerateCode">
                        <option value="DataMatrix">Data Matrix</option>
                        <option value="Pdf417">PDF417</option>
                        <option value="Aztec">Aztec</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Content</label>
                    <textarea rows="3" @bind="Host.MatrixContent" @bind:after="Host.GenerateCode"></textarea>
                </div>

                @if (Host.SelectedMatrixType == "DataMatrix")
                {
                    <div class="form-group">
                        <label>Encoding Mode</label>
                        <select @bind="Host.SelectedDataMatrixMode" @bind:after="Host.GenerateCode">
                            <option value="Auto">Auto</option>
                            <option value="Ascii">ASCII</option>
                            <option value="C40">C40</option>
                            <option value="Text">Text</option>
                            <option value="X12">X12</option>
                            <option value="Edifact">Edifact</option>
                            <option value="Base256">Base256</option>
                        </select>
                    </div>
                }
                else if (Host.SelectedMatrixType == "Pdf417")
                {
                    <div class="form-group">
                        <label>Error Correction: @Host.Pdf417EccLevel</label>
                        <input type="range" min="-1" max="8" step="1" @bind="Host.Pdf417EccLevel" @bind:after="Host.GenerateCode" />
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" @bind="Host.Pdf417Compact" @bind:after="Host.GenerateCode" />
                            Compact PDF417
                        </label>
                    </div>
                }
                else if (Host.SelectedMatrixType == "Aztec")
                {
                    <div class="form-group">
                        <label>
                            <input type="checkbox" @bind="Host.AztecAutoEcc" @bind:after="Host.GenerateCode" />
                            Auto error correction
                        </label>
                    </div>
                    <div class="form-group">
                        <label>Error Correction %: @Host.AztecEccPercent</label>
                        <input type="range" min="5" max="50" step="1" @bind="Host.AztecEccPercent" @bind:after="Host.GenerateCode" disabled="@Host.AztecAutoEcc" />
                    </div>
                    <div class="form-group">
                        <label>Layers (0 = auto): @Host.AztecLayers</label>
                        <input type="range" min="0" max="32" step="1" @bind="Host.AztecLayers" @bind:after="Host.GenerateCode" />
                    </div>
                }
            }

            <button class="btn btn-primary" style="width: 100%; margin-top: 1.5rem;" @onclick="Host.GenerateCode">
                Generate Code
            </button>
        }
    </div>
}

@code {
    [CascadingParameter]
    public Playground? Host { get; set; }
}
